<link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.31.1/min/vs/editor/editor.main.min.css">
<!-- form begin -->
<form action="/admin/code/save" method="post" enctype="multipart/form-data" id="myform">
  <input type="hidden" name="code_id" value="{{code_data[0]}}" />

  <div class="field is-horizontal">
    <div class="field-label is-normal">
      <label class="label">Hyperlink</label>
    </div>
    <div class="field-body">
      <div class="field">
        <div class="control">
          <div class="field has-addons">
            <p class="control"><a class="button is-static">/code/</a></p>
            <p class="control is-expanded">
              <input name="hyperlink" class="input" type="text" placeholder="how it will be reached?" maxlength="15" value="{{code_data[1]}}" />
            </p>
          </div>
        </div>
        <p class="help is-danger">If left empty- it will be autogenerated</p>
      </div>
    </div>
  </div>

  <div class="field is-horizontal">
    <div class="field-label is-normal">
      <label class="label">Enabled</label>
    </div>
    <div class="field-body">
      <div class="field">
        <div class="control">
          <label class="radio mr-3">
            <input type="radio" name="enabled" value="1" {{"checked" if code_data[4] else ""}}>Yes
          </label>
          <label class="radio ml-3">
            <input type="radio" name="enabled" value="0" {{"checked" if not code_data[4] else ""}}>No
          </label>
        </div>
      </div>
    </div>
  </div>

  <div class="field is-horizontal">
    <div class="field-label is-normal">
      <label class="label">Methods</label>
    </div>
    <div class="field-body">
      <div class="field">
        <div class="control">
          <label class="checkbox mr-3">
            <input type="checkbox" name="methods[]" value="GET" {{"checked" if code_data[3].find("GET")>-1 else ""}}> GET
          </label>
          <label class="checkbox ml-3">
            <input type="checkbox" name="methods[]" value="POST" {{"checked" if code_data[3].find("POST")>-1 else ""}}> POST
          </label>
        </div>
      </div>
    </div>
  </div>

  <div class="field is-horizontal">
    <div class="field-label is-normal">
      <label class="label">Title</label>
    </div>
    <div class="field-body">
      <div class="field">
        <div class="control">
          <input name="title" class="input" type="text" placeholder="Title for your Codepage" maxlength="50" value="{{code_data[2]}}" />
        </div>
      </div>
    </div>
  </div>

  <div class="field is-horizontal">
    <div class="field-label is-normal">
      <label class="label">Executable</label>
    </div>
    <div class="field-body">
      <div class="field">
        <div class="control">
          <div id="code-container" style="height:400px;border:1px solid black;"></div>
          <div id="code-source" style="display:none;">{{code_data[5]}}</div>
        </div>
        <textarea class="is-hidden" name="code" id="codepage"></textarea>
        <p class="help is-info">This support everything whats in Visual Studio Code</p>
      </div>
    </div>
  </div>
  
  <div class="divider"></div>

  <div class="field is-horizontal">
    <div class="field-label">
      <!-- Left empty for spacing -->
    </div>
    <div class="field-body">
      <div class="field">
        <div class="control">
          <div class="field buttons is-pulled-right">
            <a class="control button">Compare</a>
          </div>
          <div class="field buttons is-pulled-left ">
            <button id="sub_btn" type="submit" class="control button is-link">Submit</button>
            <a href="/admin/code" class="control button is-danger is-light">Close</a>
          </div>
        </div>
      </div>
    </div>
  </div>
<!-- --------------------------------------------------- -->
</form>
<!-- form end -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.31.1/min/vs/loader.min.js"></script>
<script type="text/javascript">
// require is provided by loader.min.js.
require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.31.1/min/vs' }});
require(["vs/editor/editor.main"], () => {
  var editor = monaco.editor.create(document.getElementById('code-container'), {
    value: document.getElementById('code-source').innerHTML,
    language: 'python',
    theme: 'vs',
  });

  // copy editor value to hidden textarea
  document.getElementById('myform').addEventListener("submit", function() {
    document.getElementById('codepage').value = editor.getModel().getValue()
  })


});
</script>